---
title: Modifications de l’expérience utilisateur entre WSL 1 et WSL 2
description: Modification de l’expérience utilisateur entre WSL 1 et WSL 2
keywords: BashOnWindows, bash, WSL, wsl2, Windows, sous-système Windows pour Linux, windowssubsystem, Ubuntu, Debian, SUSE, Windows 10
ms.date: 05/30/2019
ms.topic: article
ms.assetid: 7afaeacf-435a-4e58-bff0-a9f0d75b8a51
ms.custom: seodec18
ms.openlocfilehash: 1af9646b9b5bb845dd60e5bf2312f8d806fca5dc
ms.sourcegitcommit: 0b5a9f8982dfff07fc8df32d74d97293654f8e12
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/25/2019
ms.locfileid: "71269884"
---
# <a name="user-experience-changes-between-wsl-1-and-wsl-2"></a><span data-ttu-id="50335-104">Modification de l’expérience utilisateur entre WSL 1 et WSL 2</span><span class="sxs-lookup"><span data-stu-id="50335-104">User Experience Changes Between WSL 1 and WSL 2</span></span>

<span data-ttu-id="50335-105">Cette page présente les différences d’expérience utilisateur entre WSL 1 et WSL 2 Preview.</span><span class="sxs-lookup"><span data-stu-id="50335-105">This page goes over the user experience differences between WSL 1 and the WSL 2 preview.</span></span> <span data-ttu-id="50335-106">Les modifications clés à prendre en compte sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="50335-106">The key changes to be aware of are:</span></span>

- <span data-ttu-id="50335-107">Placez les fichiers auxquels vos applications Linux accéderont dans votre système de fichiers racine Linux pour accélérer les performances des fichiers.</span><span class="sxs-lookup"><span data-stu-id="50335-107">Place files that your Linux apps will access in your Linux root file system for faster file performance speed</span></span>
- <span data-ttu-id="50335-108">Dans les versions initiales de la version préliminaire de WSL 2, vous devez accéder aux applications réseau à l’aide d’une adresse IP et non de localhost</span><span class="sxs-lookup"><span data-stu-id="50335-108">In initial builds of the WSL 2 preview you will need to access network applications using an IP address and not using localhost</span></span>

<span data-ttu-id="50335-109">Vous trouverez ci-dessous la liste complète des autres modifications que vous pouvez remarquer :</span><span class="sxs-lookup"><span data-stu-id="50335-109">And below is the full list of other changes that you may notice:</span></span>

- <span data-ttu-id="50335-110">WSL 2 utilise un [disque dur virtuel](https://en.wikipedia.org/wiki/VHD_(file_format)) (VHD) pour stocker vos fichiers et, si vous atteignez sa taille maximale, vous devrez peut-être l'étendre</span><span class="sxs-lookup"><span data-stu-id="50335-110">WSL 2 uses a [Virtual Hardware Disk](https://en.wikipedia.org/wiki/VHD_(file_format)) (VHD) to store your files and if you reach its max size you may need to expand it</span></span>
- <span data-ttu-id="50335-111">WSL 2 utilise à présent une petite proportion de mémoire lors du démarrage</span><span class="sxs-lookup"><span data-stu-id="50335-111">When starting, WSL 2 will now use a small proportion of memory</span></span>
- <span data-ttu-id="50335-112">La vitesse d’accès aux fichiers entre systèmes d’exploitation sera plus lente dans les versions préliminaires initiales</span><span class="sxs-lookup"><span data-stu-id="50335-112">Cross OS file access speed will be slower in initial preview builds</span></span>

## <a name="place-your-linux-files-in-your-linux-root-file-system"></a><span data-ttu-id="50335-113">Placez vos fichiers Linux dans votre système de fichiers racine Linux</span><span class="sxs-lookup"><span data-stu-id="50335-113">Place your Linux files in your Linux root file system</span></span>
<span data-ttu-id="50335-114">Veillez à placer les fichiers auxquels vous accédez fréquemment avec les applications Linux à l’intérieur de votre système de fichiers racine Linux pour bénéficier des avantages en matière de performances des fichiers.</span><span class="sxs-lookup"><span data-stu-id="50335-114">Make sure to put the files that you will be accessing frequently with Linux applications inside of your Linux root file system to enjoy the file performance benefits.</span></span> <span data-ttu-id="50335-115">Ces fichiers doivent se trouver dans le système de fichiers racine Linux pour bénéficier d’un accès plus rapide au système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="50335-115">These files have to be inside of the Linux root file system to have faster file system access.</span></span> <span data-ttu-id="50335-116">Nous avons également rendu possible les applications Windows à accéder au système de fichiers racine Linux (comme l’Explorateur de fichiers !</span><span class="sxs-lookup"><span data-stu-id="50335-116">We have also made it possible for Windows apps to access the Linux root file system (like File Explorer!</span></span> <span data-ttu-id="50335-117">Essayez d’exécuter `explorer.exe .` : dans le répertoire de départ de votre distribution Linux et voyez ce qui se passe, ce qui rendra cette transition beaucoup plus facile.</span><span class="sxs-lookup"><span data-stu-id="50335-117">Try running: `explorer.exe .` in the home directory of your Linux distro and see what happens) which will make this transition significantly easier.</span></span> 

## <a name="accessing-network-applications"></a><span data-ttu-id="50335-118">Accès aux applications réseau</span><span class="sxs-lookup"><span data-stu-id="50335-118">Accessing network applications</span></span>
<span data-ttu-id="50335-119">Dans les versions initiales de la version préliminaire de WSL 2, vous devrez accéder à n’importe quel serveur Windows à partir de Linux à l’aide de l’adresse IP de votre ordinateur hôte.</span><span class="sxs-lookup"><span data-stu-id="50335-119">In the initial builds of the WSL 2 preview, you will need to access any Windows server from Linux using the IP address of your host machine.</span></span>

### <a name="accessing-windows-applications-from-linux"></a><span data-ttu-id="50335-120">Accès aux applications Windows à partir de Linux</span><span class="sxs-lookup"><span data-stu-id="50335-120">Accessing Windows applications from Linux</span></span>
<span data-ttu-id="50335-121">Pour accéder à une application réseau Windows, vous devez utiliser l’adresse IP de votre ordinateur hôte.</span><span class="sxs-lookup"><span data-stu-id="50335-121">To access a Windows network application you'll need to use the IP address of your host machine.</span></span> <span data-ttu-id="50335-122">Pour ce faire, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="50335-122">You can do so with these steps:</span></span>

- <span data-ttu-id="50335-123">Obtenez l’adresse IP de votre ordinateur hôte en exécutant la commande `cat /etc/resolv.conf` et en copiant l’adresse IP à la suite du terme `nameserver`.</span><span class="sxs-lookup"><span data-stu-id="50335-123">Obtain the IP address of your host machine by running the command `cat /etc/resolv.conf` and copying the IP address following the term `nameserver`.</span></span> 
- <span data-ttu-id="50335-124">Connectez-vous à n’importe quel serveur Windows à l’aide de l’adresse IP copiée.</span><span class="sxs-lookup"><span data-stu-id="50335-124">Connect to any Windows server using the copied IP address.</span></span>

<span data-ttu-id="50335-125">L’image ci-dessous présente un exemple de connexion à un serveur Node.js s’exécutant sous Windows via curl.</span><span class="sxs-lookup"><span data-stu-id="50335-125">The picture below shows an example of this by connecting to a Node.js server running in Windows via curl.</span></span> 

![Accès aux applications réseau Linux à partir de Windows](media/wsl2-network-l2w.png)

### <a name="accessing-linux-applications-from-windows-only-in-builds-lower-than-18945"></a><span data-ttu-id="50335-127">Accès aux applications Linux à partir de Windows (uniquement dans les builds inférieurs à 18945)</span><span class="sxs-lookup"><span data-stu-id="50335-127">Accessing Linux applications from Windows (only in builds lower than 18945)</span></span>
<span data-ttu-id="50335-128">Si vous avez un serveur dans une distribution WSL, vous devez trouver l’adresse IP de la machine virtuelle qui alimente votre distribution et vous y connecter avec cette adresse IP.</span><span class="sxs-lookup"><span data-stu-id="50335-128">If you have a server in a WSL distro, you'll need to find the IP address of the virtual machine powering your distro and connect to it with that IP address.</span></span> <span data-ttu-id="50335-129">Pour ce faire, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="50335-129">You can do that by following these steps:</span></span>

- <span data-ttu-id="50335-130">Obtenez l’adresse IP de votre distribution en exécutant la commande `ip addr` à l’intérieur de votre distribution WSL et en la recherchant sous la valeur `inet` de l’interface `eth0`.</span><span class="sxs-lookup"><span data-stu-id="50335-130">Obtain the IP address of your distro by running the command `ip addr` inside of your WSL distro and finding it under the `inet` value of the `eth0` interface.</span></span>
   - <span data-ttu-id="50335-131">Vous pouvez le trouver plus facilement en filtrant la sortie de la commande à l’aide de grep `ip addr | grep eth0`comme suit :.</span><span class="sxs-lookup"><span data-stu-id="50335-131">You can find this more easily by filtering the output of the command using grep like so: `ip addr | grep eth0`.</span></span>
- <span data-ttu-id="50335-132">Connectez-vous à votre serveur Linux à l’aide de l’adresse IP que vous avez trouvée ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="50335-132">Connect to your Linux server using the IP you found above.</span></span>

<span data-ttu-id="50335-133">L’image ci-dessous en présente un exemple en vous connectant à un serveur node. js à l’aide du navigateur Edge.</span><span class="sxs-lookup"><span data-stu-id="50335-133">The picture below shows an example of this by connecting to a Node.js server using the Edge browser.</span></span>

![Accès aux applications réseau Linux à partir de Windows](media/wsl2-network-w2l.jpg)

<span data-ttu-id="50335-135">Si votre Build est 18945 ou une version ultérieure, vous pouvez utiliser localhost comme normal.</span><span class="sxs-lookup"><span data-stu-id="50335-135">If your build is 18945 or higher, you can use localhost just like normal.</span></span> 

### <a name="other-networking-considerations"></a><span data-ttu-id="50335-136">Autres considérations relatives à la mise en réseau</span><span class="sxs-lookup"><span data-stu-id="50335-136">Other networking considerations</span></span>

<span data-ttu-id="50335-137">Lorsque vous utilisez des adresses IP distantes pour vous connecter à vos applications, celles-ci sont traitées comme des connexions à partir du réseau local (LAN).</span><span class="sxs-lookup"><span data-stu-id="50335-137">When using remote IP addresses to connect to your applications, they will be treated as connections from the Local Area Network (LAN).</span></span> <span data-ttu-id="50335-138">Cela signifie que vous devez vous assurer que votre application peut accepter des connexions LAN, par exemple : vous devrez peut-être lier votre application à « 0.0.0.0 » au lieu de « 127.0.0.1 ».</span><span class="sxs-lookup"><span data-stu-id="50335-138">This means that you will need to make sure your application can accept LAN connections, i.e: You might need to bind your application to `0.0.0.0` instead of `127.0.0.1`.</span></span> <span data-ttu-id="50335-139">Par exemple, en utilisant Flask sous Python, vous pouvez le faire avec la commande « app.run(host='0.0.0.0') ».</span><span class="sxs-lookup"><span data-stu-id="50335-139">For example in python using flask this can be done with the command: `app.run(host='0.0.0.0')`.</span></span> <span data-ttu-id="50335-140">Gardez à l’esprit la sécurité lorsque vous apportez ces modifications, car cela permettra d'autoriser des connexions à partir de votre réseau local.</span><span class="sxs-lookup"><span data-stu-id="50335-140">Please keep security in mind when making these changes, as this will allow connections from your LAN.</span></span> 

## <a name="understanding-wsl-2-uses-a-vhd-and-what-to-do-if-you-reach-its-max-size"></a><span data-ttu-id="50335-141">La compréhension de WSL 2 utilise un disque dur virtuel et explique ce qu’il faut faire si vous atteignez sa taille maximale</span><span class="sxs-lookup"><span data-stu-id="50335-141">Understanding WSL 2 uses a VHD, and what to do if you reach its max size</span></span>
<span data-ttu-id="50335-142">WSL 2 stocke tous vos fichiers Linux à l’intérieur d’un VHD qui utilise le système de fichiers ext4.</span><span class="sxs-lookup"><span data-stu-id="50335-142">WSL 2 stores all your Linux files inside of a VHD that uses the ext4 file system.</span></span> <span data-ttu-id="50335-143">Ce disque dur virtuel est redimensionné automatiquement en fonction de vos besoins de stockage.</span><span class="sxs-lookup"><span data-stu-id="50335-143">This VHD automatically resizes to meet your storage needs.</span></span> <span data-ttu-id="50335-144">Ce disque dur virtuel a également une taille maximale initiale de 256 Go.</span><span class="sxs-lookup"><span data-stu-id="50335-144">This VHD also has an initial max size of 256GB.</span></span> <span data-ttu-id="50335-145">Si la taille de votre distribution est supérieure à 256 Go, vous verrez des erreurs indiquant que l’espace disque est insuffisant.</span><span class="sxs-lookup"><span data-stu-id="50335-145">If your distro grows in size to be greater than 256GB you will see errors stating that you've run out of disk space.</span></span> <span data-ttu-id="50335-146">Vous pouvez résoudre ces problème en développant la taille du disque dur virtuel.</span><span class="sxs-lookup"><span data-stu-id="50335-146">You can fix these by expanding the VHD size.</span></span> <span data-ttu-id="50335-147">Vous trouverez ci-dessous des instructions sur la procédure à suivre :</span><span class="sxs-lookup"><span data-stu-id="50335-147">Instructions on how to do so are below:</span></span>

1. <span data-ttu-id="50335-148">Arrêter toutes les instances WSL à l’aide de la commande `wsl --shutdown`</span><span class="sxs-lookup"><span data-stu-id="50335-148">Terminate all WSL instances using the `wsl --shutdown` command</span></span>
2. <span data-ttu-id="50335-149">Recherchez le nom de votre package d’installation distribution « PackageFamilyName »</span><span class="sxs-lookup"><span data-stu-id="50335-149">Find your distro installation package name 'PackageFamilyName'</span></span>
   - <span data-ttu-id="50335-150">Dans une invite PowerShell (où « distribution » est le nom de votre distribution), tapez :</span><span class="sxs-lookup"><span data-stu-id="50335-150">In a powershell prompt (where 'distro' is your distribution name) type:</span></span>
      - `Get-AppxPackage -Name "*<distro>*" | Select PackageFamilyName`
3. <span data-ttu-id="50335-151">Localisez le fichier de disque dur virtuel (FullPath) utilisé par votre installation de WSL 2, il s’agit de votre « pathToVHD » :</span><span class="sxs-lookup"><span data-stu-id="50335-151">Locate the VHD file fullpath used by your WSL 2 installation, this will be your 'pathToVHD':</span></span>
     - `%LOCALAPPDATA%\Packages\<PackageFamilyName>\LocalState\<disk>.vhdx`
4. <span data-ttu-id="50335-152">Redimensionnez votre disque dur virtuel WSL 2 en exécutant les commandes suivantes</span><span class="sxs-lookup"><span data-stu-id="50335-152">Resize your WSL 2 VHD by completing the following commands</span></span>
   - <span data-ttu-id="50335-153">Ouvrez une fenêtre d’invite de commandes avec des privilèges d’administrateur et exécutez les commandes suivantes :</span><span class="sxs-lookup"><span data-stu-id="50335-153">Open a command prompt Window with admin privileges and run the following commands:</span></span>
      - `diskpart`
      - `Select vdisk file="<pathToVHD>"`
      - `expand vdisk maximum="<sizeInMegaBytes>"`
5. <span data-ttu-id="50335-154">Lancez votre distribution WSL</span><span class="sxs-lookup"><span data-stu-id="50335-154">Launch your WSL distro</span></span>
6. <span data-ttu-id="50335-155">Rendre WSL conscient qu’il peut étendre sa taille de système de fichiers</span><span class="sxs-lookup"><span data-stu-id="50335-155">Make WSL aware that it can expand its file system's size</span></span>
   - <span data-ttu-id="50335-156">Exécutez ces commandes dans votre distribution WSL :</span><span class="sxs-lookup"><span data-stu-id="50335-156">Run these commands in your WSL distro:</span></span>
      - `sudo mount -t devtmpfs none /dev`
      - `mount | grep ext4`
         - <span data-ttu-id="50335-157">Copiez le nom de cette entrée, qui ressemble à ceci:/dev/sdXX (avec X représentant tout autre caractère)</span><span class="sxs-lookup"><span data-stu-id="50335-157">Copy the name of this entry, which will look like: /dev/sdXX (with the X representing any other character)</span></span>
      - `sudo resize2fs /dev/sdXX`
         - <span data-ttu-id="50335-158">Veillez à utiliser la valeur que vous avez copiée précédemment et vous devrez peut- `apt install resize2fs`être utiliser :.</span><span class="sxs-lookup"><span data-stu-id="50335-158">Make sure to use the value you copied earlier, and you may need to use: `apt install resize2fs`.</span></span>

<span data-ttu-id="50335-159">Attention : De manière générale, évitez de modifier, de déplacer ou d'accéder aux fichiers associés à WSL situés dans votre dossier AppData à l’aide des outils ou des éditeurs Windows.</span><span class="sxs-lookup"><span data-stu-id="50335-159">Please note: In general do not modify, move, or access the WSL related files located inside of your AppData folder using Windows tools or editors.</span></span> <span data-ttu-id="50335-160">Cela peut corrompre votre distribution Linux.</span><span class="sxs-lookup"><span data-stu-id="50335-160">Doing so could cause your Linux distro to become corrupted.</span></span>

## <a name="wsl-2-will-use-some-memory-on-startup"></a><span data-ttu-id="50335-161">WSL 2 va utiliser de la mémoire au démarrage</span><span class="sxs-lookup"><span data-stu-id="50335-161">WSL 2 will use some memory on startup</span></span>
<span data-ttu-id="50335-162">WSL 2 utilise une machine virtuelle utilitaire légère sur un véritable noyau Linux pour offrir des performances optimales pour le système de fichiers et une compatibilité complète des appels système tout en étant aussi clair, rapide, intégré et réactif que WSL 1.</span><span class="sxs-lookup"><span data-stu-id="50335-162">WSL 2 uses a lightweight utility VM on a real Linux kernel to provide great file system performance and full system call compatibility while still being just as light, fast, integrated and responsive as WSL 1.</span></span> <span data-ttu-id="50335-163">Cette machine virtuelle de l’utilitaire présente un faible encombrement mémoire et alloue de la mémoire à l’adresse virtuelle au démarrage.</span><span class="sxs-lookup"><span data-stu-id="50335-163">This utility VM has a small memory footprint and will allocate Virtual Address backed memory on startup.</span></span> <span data-ttu-id="50335-164">Il est configuré pour démarrer avec une petite partie de la mémoire totale.</span><span class="sxs-lookup"><span data-stu-id="50335-164">It is configured to start with a small proportion of your total memory.</span></span>

## <a name="cross-os-file-speed-will-be-slower-in-initial-preview-builds"></a><span data-ttu-id="50335-165">La vitesse des fichiers de système d’exploitation est plus lente dans les versions préliminaires initiales</span><span class="sxs-lookup"><span data-stu-id="50335-165">Cross OS file speed will be slower in initial preview builds</span></span>
<span data-ttu-id="50335-166">Vous remarquerez des vitesses de fichiers plus lentes par rapport à WSL 1 lorsque vous accédez à des fichiers Windows à partir d’une application Linux, ou lorsque vous accédez à des fichiers Linux à partir d’une application Windows.</span><span class="sxs-lookup"><span data-stu-id="50335-166">You will notice slower file speeds compared to WSL 1 when accessing Windows files from a Linux application, or accessing Linux files from a Windows application.</span></span> <span data-ttu-id="50335-167">Il s’agit d’un résultat des modifications architecturales dans WSL 2. il s’agit d’une étude active de l’équipe WSL sur la façon dont nous pouvons améliorer cette expérience.</span><span class="sxs-lookup"><span data-stu-id="50335-167">This is a result of the architectural changes in WSL 2, and is something that the WSL team is actively investigating on how we can improve this experience.</span></span>
